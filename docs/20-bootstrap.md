# 自举与阶段划分（Stage0 范围已定）

本章用于定义 Vox 的自举路线，以及 Stage0（宿主实现）的范围边界。

## 总体策略

1. **Stage0（Go）**：实现 Vox 的一个“可用于自举”的实用子集，重点是工程基础（包/多文件/测试/诊断），而不是语言全部特性。
2. **Stage1（Vox）**：用 Vox 实现 Vox 编译器，目标是在功能覆盖上达到 Stage0，并逐步取代 Stage0 的实现。
3. **Stage2（Vox）**：完善优化、IR、工具链与更多语言特性（comptime/宏等）。

## Stage0 范围（已定）

Stage0 的目标是“能写编译器”，但保持范围可控，不引入会显著放大实现复杂度的特性。

### 必须包含（工程基础）

- 包：`vox.toml`（最小可用子集，至少支持 `[package]` 与 path 依赖的校验）
- 多文件：一个包可包含多个 `.vox` 源文件（`src/` 递归）
- 测试：`vox test`（最小可用测试发现与运行）
- 诊断：文件/行列定位、稳定错误信息

### 必须包含（语言子集）

- 基本类型：`i32`、`i64`、`bool`、`String`、`()`
- 函数：`fn`、参数/返回、调用、递归
- 绑定与可变：`let`、`let mut`、赋值、`return`
- 控制流：`if/else`
- 表达式：字面量、变量、算术/比较/逻辑运算

### 可以包含（避免 Stage1 代码啰嗦）

这些能力对“实现编译器”的代码体量与可读性影响很大，但仍然可控：

- `struct` / `enum` + `match`
- `Vec[T]` 等基础容器（可先作为内建类型/宿主库）

### 明确不包含（Stage0 非目标）

- 编译期计算：`comptime`（包括相关内建与执行器）
- 宏：`name!(...)`、`quote`/AST 类型
- trait/impl、泛型单态化（可后续再加）
- async/await
- effect/资源系统

## Stage1 覆盖策略

Stage1 的首要目标是覆盖 Stage0 的能力与工具链行为，避免出现“Stage0 能跑但 Stage1 还写不出来”的断层。

建议优先顺序：

1. 解析/多文件加载/包系统
2. 类型检查（覆盖 Stage0 子集）
3. 解释器或简单 IR（用于自举阶段跑 compiler）
4. `vox test` 一致性与回归集

