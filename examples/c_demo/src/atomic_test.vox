fn test_atomic_i32_basic() -> () {
  let a: Atomic[i32] = Atomic(0);
  assert(a.load() == 0);
  a.store(42);
  assert(a.load() == 42);
  let old: i32 = a.fetch_add(8);
  assert(old == 42);
  assert(a.load() == 50);
  let swapped: i32 = a.swap(100);
  assert(swapped == 50);
  assert(a.load() == 100);
  let ok: bool = a.cas(100, 200);
  assert(ok);
  assert(a.load() == 200);
  let fail: bool = a.cas(999, 300);
  assert(!fail);
  assert(a.load() == 200);
  a.drop();
}
