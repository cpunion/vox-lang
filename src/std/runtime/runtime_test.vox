import "std/runtime" as rt
import "std/testing" as t

fn test_runtime_intrinsic_abi_and_intrinsic_probe_smoke() -> () {
  t.assert(rt.intrinsic_abi() >= 1);
  t.assert(!rt.has_intrinsic("__read_file"));
  t.assert(!rt.has_intrinsic("__wake_wait_any"));
  t.assert(!rt.has_intrinsic("not_real_intrinsic"));
}

fn test_runtime_wake_wait_any_smoke() -> () {
  let mut toks: Vec[i64] = Vec();
  toks.push(101 as i64);
  toks.push(102 as i64);
  t.assert_eq(rt.wake_wait_any(toks, 0), -1);
  rt.wake_notify(102 as i64);
  t.assert_eq(rt.wake_wait_any(toks, 1), 1);
}

fn test_runtime_atomic_i32_handle_isize_smoke() -> () {
  let h: isize = rt.atomic_i32_new(1);
  t.assert_eq(rt.atomic_i32_load(h), 1);
  rt.atomic_i32_store(h, 3);
  t.assert_eq(rt.atomic_i32_load(h), 3);
  rt.atomic_i32_drop(h);
}
