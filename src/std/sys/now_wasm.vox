@build(wasm)

@ffi_import("c", "clock") fn c_clock() -> i64;

// CLOCKS_PER_SEC = 1000000 on POSIX-like wasm libc.
fn CLOCKS_PER_SEC() -> i64 { return 1000000; }

pub fn now_ns() -> i64 {
  let c: i64 = c_clock();
  if c < 0 { return 0; }
  return c * (1000000000 as i64) / CLOCKS_PER_SEC();
}
