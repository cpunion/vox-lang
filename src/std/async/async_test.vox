import "std/testing" as t
import "std/async" as a

fn test_std_async_poll_helpers_smoke() -> () {
  let p0: a.Poll[i32] = a.Poll.Pending;
  let p1: a.Poll[i32] = a.Poll.Ready(7);
  t.assert(a.is_pending(p0));
  t.assert(!a.is_ready(p0));
  t.assert(a.is_ready(p1));
  t.assert(!a.is_pending(p1));
}

fn test_std_async_context_waker_smoke() -> () {
  let w: a.Waker = a.waker(11);
  let cx: a.Context = a.context(w);
  t.assert_eq(cx.waker.token, 11);
}

fn test_std_async_spin_wait_smoke() -> () {
  a.spin_wait(0);
  a.spin_wait(7);
}

fn test_std_async_pending_wait_smoke() -> () {
  let w: a.Waker = a.waker(3);
  let cx: a.Context = a.context(w);
  a.pending_wait(0, cx);
  a.pending_wait(5, cx);
}
