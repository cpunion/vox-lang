// std/sync: Mutex[T] backed by built-in Atomic[T] (no C FFI needed).

pub struct Mutex[T] {
  inner: Atomic[T],
}

pub fn mutex[T](v: T) -> Mutex[T] {
  return Mutex { inner: Atomic(v) };
}

pub fn mutex_load[T](m: Mutex[T]) -> T {
  return m.inner.load();
}

pub fn mutex_store[T](m: Mutex[T], v: T) -> Mutex[T] {
  m.inner.store(v);
  return m;
}

pub fn mutex_into_inner[T](m: Mutex[T]) -> T {
  return m.inner.load();
}

pub fn mutex_drop[T](m: Mutex[T]) -> () {
  m.inner.drop();
}
