@build(darwin)

@ffi_import("c", "opendir") fn c_opendir(path: String) -> rawptr;
@ffi_import("c", "readdir") fn c_readdir(dir: rawptr) -> rawptr;
@ffi_import("c", "closedir") fn c_closedir(dir: rawptr) -> i32;

// struct dirent (macOS): d_type at offset 20, d_name at offset 21.
fn c_dirent_name(ent: rawptr) -> String {
  return @ptr_offset(ent, 21 as isize) as String;
}
fn c_dirent_is_dir(ent: rawptr) -> bool {
  return @ptr_read[u8](@ptr_offset(ent, 20 as isize)) == (4 as u8);
}
