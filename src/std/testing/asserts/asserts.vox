// Modular assertion extensions for std/testing.
// Keep std/testing's existing t.assert* API unchanged.

import "std/prelude" as prelude
import "std/string" as str

fn fail(msg: String) -> () { prelude.fail(msg); }

pub fn is_true(cond: bool) -> () {
  if cond { return; }
  fail("assertion failed: expected true");
}

pub fn is_false(cond: bool) -> () {
  if !cond { return; }
  fail("assertion failed: expected false");
}

pub fn str_contains(hay: String, needle: String) -> () {
  if str.contains(str.view_all(hay), needle) { return; }
  fail("assertion failed: expected string to contain substring");
}

pub fn str_not_contains(hay: String, needle: String) -> () {
  if !str.contains(str.view_all(hay), needle) { return; }
  fail("assertion failed: expected string not to contain substring");
}

pub fn str_starts_with(s: String, pre: String) -> () {
  if str.starts_with(str.view_all(s), pre) { return; }
  fail("assertion failed: expected string to start with prefix");
}

pub fn str_ends_with(s: String, suf: String) -> () {
  if str.ends_with(str.view_all(s), suf) { return; }
  fail("assertion failed: expected string to end with suffix");
}

pub fn str_empty(s: String) -> () {
  if s.len() == 0 { return; }
  fail("assertion failed: expected empty string");
}

pub fn str_not_empty(s: String) -> () {
  if s.len() != 0 { return; }
  fail("assertion failed: expected non-empty string");
}
